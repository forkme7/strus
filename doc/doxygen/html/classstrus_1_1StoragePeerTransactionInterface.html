<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>strus: strus::StoragePeerTransactionInterface Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">strus
   &#160;<span id="projectnumber">0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacestrus.html">strus</a></li><li class="navelem"><a class="el" href="classstrus_1_1StoragePeerTransactionInterface.html">StoragePeerTransactionInterface</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classstrus_1_1StoragePeerTransactionInterface-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">strus::StoragePeerTransactionInterface Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Interface for a transaction to populate changes of global statistics from the local storage to its peers.  
 <a href="classstrus_1_1StoragePeerTransactionInterface.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="storagePeerTransactionInterface_8hpp_source.html">storagePeerTransactionInterface.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a284f3814a4554f3517b2f6ae0e234191"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstrus_1_1StoragePeerTransactionInterface.html#a284f3814a4554f3517b2f6ae0e234191">~StoragePeerTransactionInterface</a> ()</td></tr>
<tr class="memdesc:a284f3814a4554f3517b2f6ae0e234191"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a284f3814a4554f3517b2f6ae0e234191">More...</a><br/></td></tr>
<tr class="separator:a284f3814a4554f3517b2f6ae0e234191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a909d977422f09f72e15710a5a2780741"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstrus_1_1StoragePeerTransactionInterface.html#a909d977422f09f72e15710a5a2780741">populateNofDocumentsInsertedChange</a> (int increment)=0</td></tr>
<tr class="memdesc:a909d977422f09f72e15710a5a2780741"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare to send the local change of the total number of document inserted to all other peers.  <a href="#a909d977422f09f72e15710a5a2780741">More...</a><br/></td></tr>
<tr class="separator:a909d977422f09f72e15710a5a2780741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a841c75ada677c9b2dec1bde9796fb681"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstrus_1_1StoragePeerTransactionInterface.html#a841c75ada677c9b2dec1bde9796fb681">populateDocumentFrequencyChange</a> (const char *termtype, const char *termvalue, int increment, bool isnew)=0</td></tr>
<tr class="memdesc:a841c75ada677c9b2dec1bde9796fb681"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare to send the local change of the total document frequency of a term to all other peers.  <a href="#a841c75ada677c9b2dec1bde9796fb681">More...</a><br/></td></tr>
<tr class="separator:a841c75ada677c9b2dec1bde9796fb681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc1b3fc3dfbf999fc26279aea40fe85"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstrus_1_1StoragePeerTransactionInterface.html#acdc1b3fc3dfbf999fc26279aea40fe85">try_commit</a> ()=0</td></tr>
<tr class="memdesc:acdc1b3fc3dfbf999fc26279aea40fe85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query to commit of the transaction.  <a href="#acdc1b3fc3dfbf999fc26279aea40fe85">More...</a><br/></td></tr>
<tr class="separator:acdc1b3fc3dfbf999fc26279aea40fe85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24f056ac9fd930e411d49cc8130e204f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstrus_1_1StoragePeerTransactionInterface.html#a24f056ac9fd930e411d49cc8130e204f">final_commit</a> ()=0</td></tr>
<tr class="memdesc:a24f056ac9fd930e411d49cc8130e204f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Final commit of the transaction.  <a href="#a24f056ac9fd930e411d49cc8130e204f">More...</a><br/></td></tr>
<tr class="separator:a24f056ac9fd930e411d49cc8130e204f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdc64985e3db40cd59ce38975dd4dce0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstrus_1_1StoragePeerTransactionInterface.html#abdc64985e3db40cd59ce38975dd4dce0">rollback</a> ()=0</td></tr>
<tr class="memdesc:abdc64985e3db40cd59ce38975dd4dce0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rollback of the transaction.  <a href="#abdc64985e3db40cd59ce38975dd4dce0">More...</a><br/></td></tr>
<tr class="separator:abdc64985e3db40cd59ce38975dd4dce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface for a transaction to populate changes of global statistics from the local storage to its peers. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a284f3814a4554f3517b2f6ae0e234191"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual strus::StoragePeerTransactionInterface::~StoragePeerTransactionInterface </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>
<dl class="section note"><dt>Note</dt><dd>The destructor should do an automatic rollback if not issued yet </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a24f056ac9fd930e411d49cc8130e204f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void strus::StoragePeerTransactionInterface::final_commit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Final commit of the transaction. </p>
<dl class="section remark"><dt>Remarks</dt><dd>This operation MUST NOT throw but a fatal exception that leads to an abort. It may issue an alert if the system operation to finalize the commit failed. The try_commit called before must guarantee that no data is lost. </dd></dl>

</div>
</div>
<a class="anchor" id="a841c75ada677c9b2dec1bde9796fb681"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void strus::StoragePeerTransactionInterface::populateDocumentFrequencyChange </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>termtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>termvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>increment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isnew</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare to send the local change of the total document frequency of a term to all other peers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">termtype</td><td>type of the term </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">termvalue</td><td>value of the term </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">increment</td><td>positive or negative (decrement) value of the local change of the document frequency </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">isnew</td><td>true, if the feature is new in the index of the sender. Triggers the receivers to send their value back for update </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>throws if the operation was not successful </dd></dl>

</div>
</div>
<a class="anchor" id="a909d977422f09f72e15710a5a2780741"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void strus::StoragePeerTransactionInterface::populateNofDocumentsInsertedChange </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>increment</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare to send the local change of the total number of document inserted to all other peers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">increment</td><td>positive or negative (decrement) value of the local change of the collection size </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>throws if the send was not successful (the transport layer must guarantee that this change will be delivered, if the send operation was successful) </dd></dl>

</div>
</div>
<a class="anchor" id="abdc64985e3db40cd59ce38975dd4dce0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void strus::StoragePeerTransactionInterface::rollback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rollback of the transaction. </p>

</div>
</div>
<a class="anchor" id="acdc1b3fc3dfbf999fc26279aea40fe85"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void strus::StoragePeerTransactionInterface::try_commit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Query to commit of the transaction. </p>
<dl class="section remark"><dt>Remarks</dt><dd>The query to commit does not have to guarantee that all peers get up to date immediately. But it has to guarantee that no update is lost (persistent queue or something similar) </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/patrick/Projects/github/strus/include/strus/<a class="el" href="storagePeerTransactionInterface_8hpp_source.html">storagePeerTransactionInterface.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jun 6 2015 15:04:57 for strus by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
